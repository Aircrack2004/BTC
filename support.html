<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking.com Customer Support</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        html, body {
            height: 100%;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            max-width: 800px;
            margin: 0 auto;
            padding: 0;
        }
        
        header {
            background-color: #003580;
            color: white;
            padding: 15px 20px;
            border-radius: 0;
            flex-shrink: 0;
        }
        
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .logo {
            display: flex;
            align-items: center;
        }
        
        .logo h1 {
            font-size: 24px;
            margin-left: 10px;
        }
        
        .status {
            display: flex;
            align-items: center;
            background-color: rgba(255, 255, 255, 0.2);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 14px;
        }
        
        .status-dot {
            width: 10px;
            height: 10px;
            background-color: #4CAF50;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .chat-container {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            background-color: white;
            border-radius: 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .chat-header {
            background-color: #f8f8f8;
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }
        
        .agent-info {
            display: flex;
            align-items: center;
        }
        
        .agent-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #003580;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            padding: 20px;
            background-color: #f9f9f9;
        }
        
        .message {
            margin-bottom: 15px;
            display: flex;
        }
        
        .customer-message {
            justify-content: flex-end;
        }
        
        .agent-message {
            justify-content: flex-start;
        }
        
        .message-bubble {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 18px;
            position: relative;
        }
        
        .customer-message .message-bubble {
            background-color: #003580;
            color: white;
            border-bottom-right-radius: 4px;
        }
        
        .agent-message .message-bubble {
            background-color: #e9e9eb;
            color: #333;
            border-bottom-left-radius: 4px;
        }
        
        .message-time {
            font-size: 12px;
            color: #888;
            margin-top: 5px;
            text-align: right;
        }
        
        .agent-message .message-time {
            text-align: left;
        }
        
        .typing-indicator {
            display: flex;
            align-items: center;
            padding: 10px 20px;
            color: #888;
            font-style: italic;
            flex-shrink: 0;
        }
        
        .typing-dots {
            display: flex;
            margin-left: 5px;
        }
        
        .typing-dot {
            width: 6px;
            height: 6px;
            background-color: #888;
            border-radius: 50%;
            margin: 0 2px;
            animation: typing 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) {
            animation-delay: -0.32s;
        }
        
        .typing-dot:nth-child(2) {
            animation-delay: -0.16s;
        }
        
        @keyframes typing {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        .input-area {
            display: flex;
            padding: 15px 20px;
            border-top: 1px solid #eee;
            background-color: white;
            flex-shrink: 0;
        }
        
        .message-input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 24px;
            outline: none;
            font-size: 16px;
        }
        
        .send-button {
            background-color: #003580;
            color: white;
            border: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            margin-left: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .send-button:hover {
            background-color: #0046a0;
        }
        
        .booking-details {
            background-color: #e8f4fd;
            border: 1px solid #c5e1f7;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .booking-details h3 {
            color: #003580;
            margin-bottom: 10px;
        }
        
        .booking-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .booking-label {
            font-weight: bold;
            color: #555;
        }
        
        .booking-value {
            color: #003580;
        }
        
        .options {
            display: flex;
            margin-top: 15px;
            gap: 10px;
        }
        
        .option-button {
            background-color: white;
            border: 1px solid #003580;
            color: #003580;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .option-button:hover {
            background-color: #003580;
            color: white;
        }
        
        @media (max-width: 600px) {
            .container {
                height: 100vh;
                max-width: 100%;
            }
            
            .message-bubble {
                max-width: 85%;
            }
            
            .chat-header {
                padding: 10px 15px;
            }
            
            .chat-messages {
                padding: 15px;
            }
            
            .input-area {
                padding: 10px 15px;
            }
            
            header {
                padding: 12px 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="logo">
                    <svg width="30" height="30" viewBox="0 0 24 24" fill="white">
                        <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"/>
                    </svg>
                    <h1>Booking.com</h1>
                </div>
                <div class="status">
                    <div class="status-dot"></div>
                    <span>Online</span>
                </div>
            </div>
        </header>
        
        <div class="chat-container">
            <div class="chat-header">
                <div class="agent-info">
                    <div class="agent-avatar">SJ</div>
                    <div>
                        <div class="agent-name">Sarah</div>
                        <div class="agent-title">Customer Support Specialist</div>
                    </div>
                </div>
                <div class="chat-time">Today</div>
            </div>
            
            <div class="chat-messages" id="chatMessages">
                <!-- Messages will be added here by JavaScript -->
            </div>
            
            <div class="typing-indicator" id="typingIndicator">
                Sarah is typing
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>
            
            <div class="input-area">
                <input type="text" class="message-input" id="messageInput" placeholder="Type your message...">
                <button class="send-button" id="sendButton">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="white">
                        <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const chatMessages = document.getElementById('chatMessages');
    const messageInput = document.getElementById('messageInput');
    const sendButton = document.getElementById('sendButton');
    const typingIndicator = document.getElementById('typingIndicator');

    let bookingReferenceProvided = false;
    const expectedBookingRef = "DL7X9P2K";

    // Initial conversation
    const initialMessages = [
        {
            sender: 'customer',
            text: 'Hi, I have a booking from Madrid to Buffalo on Oct 20, 2025. My final destination is closer to Pittsburgh. Is it possible to change my last leg from Philadelphia to Pittsburgh instead of Buffalo, preferably on the same day?',
            time: '10:05 AM'
        },
        {
            sender: 'agent',
            text: "Hello! I'd be happy to help you with your flight change request. To access your booking details, could you please provide your booking reference number?",
            time: '10:06 AM'
        }
    ];

    // Add message to chat
    function addMessage(sender, text, time) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${sender}-message`;

        const bubbleDiv = document.createElement('div');
        bubbleDiv.className = 'message-bubble';
        bubbleDiv.textContent = text;

        const timeDiv = document.createElement('div');
        timeDiv.className = 'message-time';
        timeDiv.textContent = time;

        messageDiv.appendChild(bubbleDiv);
        messageDiv.appendChild(timeDiv);

        chatMessages.appendChild(messageDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    // Show booking details
    function showBookingDetails() {
        const detailsDiv = document.createElement('div');
        detailsDiv.className = 'booking-details';

        detailsDiv.innerHTML = `
            <h3>Booking Details</h3>
            <div class="booking-info">
                <span class="booking-label">Booking Reference:</span>
                <span class="booking-value">DL7X9P2K</span>
            </div>
            <div class="booking-info">
                <span class="booking-label">Original Route:</span>
                <span class="booking-value">MAD → PHL → BUF</span>
            </div>
            <div class="booking-info">
                <span class="booking-label">Requested Route:</span>
                <span class="booking-value">MAD → PHL → PIT</span>
            </div>
            <div class="booking-info">
                <span class="booking-label">Date:</span>
                <span class="booking-value">October 20, 2025</span>
            </div>
            <div class="booking-info">
                <span class="booking-label">Departure MAD:</span>
                <span class="booking-value">10:15 AM CEST, Terminal 4S</span>
            </div>
            <div class="booking-info">
                <span class="booking-label">Arrival PHL:</span>
                <span class="booking-value">1:00 PM EDT, Terminal A</span>
            </div>
            <div class="booking-info">
                <span class="booking-label">Layover Duration:</span>
                <span class="booking-value">2h 05m</span>
            </div>
            <div class="booking-info">
                <span class="booking-label">Departure PHL:</span>
                <span class="booking-value">3:05 PM EDT</span>
            </div>
            <div class="booking-info">
                <span class="booking-label">Arrival PIT:</span>
                <span class="booking-value">4:30 PM EDT</span>
            </div>
            <div class="booking-info">
                <span class="booking-label">Total Duration:</span>
                <span class="booking-value">11h 55m (1 stop)</span>
            </div>
        `;

        chatMessages.appendChild(detailsDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    // Show options
    function showOptions() {
        const optionsDiv = document.createElement('div');
        optionsDiv.className = 'options';

        optionsDiv.innerHTML = `
            <button class="option-button" id="optionYes">Yes, please proceed</button>
            <button class="option-button" id="optionNo">No, let me check other dates</button>
        `;

        chatMessages.appendChild(optionsDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;

        document.getElementById('optionYes').addEventListener('click', function() {
            addMessage('customer', 'Yes, please proceed with the change.', getCurrentTime());
            simulateAgentResponse(
                "Great! I've initiated the change.\n\n" +
                "Change Fee: $75.00\n" +
                "Fare Difference: $45.00\n\n" +
                "Your new total is $120.00.\n\n"
            );
        });

        document.getElementById('optionNo').addEventListener('click', function() {
            addMessage('customer', 'No, let me check other dates first.', getCurrentTime());
            simulateAgentResponse(
                "No problem. I can hold this option for 24 hours while you check your schedule. " +
                "Would you like me to send you the available options for other dates?"
            );
        });
    }

    // Simulate agent response
    function simulateAgentResponse(text) {
        typingIndicator.style.display = 'flex';
        chatMessages.scrollTop = chatMessages.scrollHeight;

        setTimeout(() => {
            typingIndicator.style.display = 'none';
            addMessage('agent', text, getCurrentTime());

            // Show booking details if flight info included
            if (text.includes("available flights")) {
                showBookingDetails();
                setTimeout(() => {
                    simulateAgentResponse("Would you like me to proceed with changing your flight to Pittsburgh?");
                    setTimeout(showOptions, 1500);
                }, 1500);
            }
        }, 2000);
    }

    // Get current time HH:MM
    function getCurrentTime() {
        const now = new Date();
        return now.getHours() + ':' + (now.getMinutes() < 10 ? '0' : '') + now.getMinutes();
    }

    // Initialize chat
    initialMessages.forEach(msg => addMessage(msg.sender, msg.text, msg.time));

    // Handle booking reference input
    function handleBookingReference(message) {
        if (message.toUpperCase().includes(expectedBookingRef)) {
            bookingReferenceProvided = true;

            setTimeout(() => {
                typingIndicator.style.display = 'flex';
                setTimeout(() => {
                    typingIndicator.style.display = 'none';
                    addMessage('agent',
                        "Thank you! I've found your booking. Let me check the availability for changing your final destination to Pittsburgh.",
                        getCurrentTime()
                    );

                    // Flight availability
                    setTimeout(() => {
                        typingIndicator.style.display = 'flex';
                        setTimeout(() => {
                            typingIndicator.style.display = 'none';
                            addMessage('agent',
                                "I found available flights for your requested change:\n\n" +
                                "Flight: American Airlines • Boeing 787-9 / Airbus A321\n" +
                                "Duration: 11h 55m (1 stop)\n\n" +
                                "Departure: Madrid–Barajas (MAD) Terminal 4S at 10:15 AM CEST, Oct 20, 2025\n" +
                                "Arrival: Philadelphia Intl (PHL) Terminal A at 1:00 PM EDT, Oct 20, 2025\n" +
                                "Layover in Philadelphia: 2h 05m\n" +
                                "Departure PHL: 3:05 PM EDT, Oct 20, 2025\n" +
                                "Arrival Pittsburgh Intl (PIT) at 4:30 PM EDT, Oct 20, 2025\n\n" +
                                "Economy Class • 1 × 23 kg checked bag + 1 cabin bag • Operated by American Airlines",
                                getCurrentTime()
                            );

                            setTimeout(showBookingDetails, 500);
                            setTimeout(() => {
                                simulateAgentResponse("Would you like me to proceed with changing your flight to Pittsburgh?");
                                setTimeout(showOptions, 1500);
                            }, 1500);

                        }, 2000);
                    }, 1500);
                }, 2000);
            }, 1000);

            return true;
        } else if (message.toLowerCase().includes("booking") || message.toLowerCase().includes("reference")) {
            simulateAgentResponse(
                "I need your booking reference to access your reservation details. It should look something like DL7X9P2K. Could you please provide it?"
            );
            return false;
        }
        return false;
    }

    // Send button click
    sendButton.addEventListener('click', function() {
        const message = messageInput.value.trim();
        if (message) {
            addMessage('customer', message, getCurrentTime());

            if (!bookingReferenceProvided) {
                if (!handleBookingReference(message)) {
                    setTimeout(() => {
                        simulateAgentResponse(
                            "To help you with your booking modification, I'll need your booking reference number. " +
                            "It should look something like DL7X9P2K. Could you please provide it?"
                        );
                    }, 1000);
                }
            } else {
                setTimeout(() => {
                    simulateAgentResponse("Thank you for your message. I'm checking that information for you now.");
                }, 1000);
            }

            messageInput.value = '';
        }
    });

    // Enter key
    messageInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') sendButton.click();
    });
});
</script>

</body>
</html>