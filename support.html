<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking.com Customer Support</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, #003580 0%, #0077c2 100%);
            color: white;
            padding: 15px 0;
            border-radius: 8px 8px 0 0;
        }
        
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
        }
        
        .logo {
            display: flex;
            align-items: center;
        }
        
        .logo h1 {
            font-size: 24px;
            margin-left: 10px;
        }
        
        .status {
            display: flex;
            align-items: center;
            background-color: rgba(255, 255, 255, 0.2);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 14px;
        }
        
        .status-dot {
            width: 10px;
            height: 10px;
            background-color: #4CAF50;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .chat-container {
            background-color: white;
            border-radius: 0 0 8px 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .chat-header {
            background-color: #f8f8f8;
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .agent-info {
            display: flex;
            align-items: center;
        }
        
        .agent-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #003580 0%, #0077c2 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .chat-messages {
            height: 400px;
            overflow-y: auto;
            padding: 20px;
            background-color: #f9f9f9;
        }
        
        .message {
            margin-bottom: 15px;
            display: flex;
        }
        
        .customer-message {
            justify-content: flex-end;
        }
        
        .agent-message {
            justify-content: flex-start;
        }
        
        .message-bubble {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 18px;
            position: relative;
        }
        
        .customer-message .message-bubble {
            background-color: #003580;
            color: white;
            border-bottom-right-radius: 4px;
        }
        
        .agent-message .message-bubble {
            background-color: #e9e9eb;
            color: #333;
            border-bottom-left-radius: 4px;
        }
        
        .message-time {
            font-size: 12px;
            color: #888;
            margin-top: 5px;
            text-align: right;
        }
        
        .agent-message .message-time {
            text-align: left;
        }
        
        .typing-indicator {
            display: flex;
            align-items: center;
            padding: 10px 20px;
            color: #888;
            font-style: italic;
        }
        
        .typing-dots {
            display: flex;
            margin-left: 5px;
        }
        
        .typing-dot {
            width: 6px;
            height: 6px;
            background-color: #888;
            border-radius: 50%;
            margin: 0 2px;
            animation: typing 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) {
            animation-delay: -0.32s;
        }
        
        .typing-dot:nth-child(2) {
            animation-delay: -0.16s;
        }
        
        @keyframes typing {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        .input-area {
            display: flex;
            padding: 15px 20px;
            border-top: 1px solid #eee;
            background-color: white;
        }
        
        .message-input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 24px;
            outline: none;
            font-size: 16px;
        }
        
        .send-button {
            background: linear-gradient(135deg, #003580 0%, #0077c2 100%);
            color: white;
            border: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            margin-left: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .send-button:hover {
            background: linear-gradient(135deg, #002244 0%, #0066a1 100%);
        }
        
        .booking-details {
            background-color: #e8f4fd;
            border: 1px solid #c5e1f7;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .booking-details h3 {
            color: #003580;
            margin-bottom: 10px;
        }
        
        .booking-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .booking-label {
            font-weight: bold;
            color: #555;
        }
        
        .booking-value {
            color: #003580;
        }
        
        .options {
            display: flex;
            margin-top: 15px;
            gap: 10px;
        }
        
        .option-button {
            background-color: white;
            border: 1px solid #003580;
            color: #003580;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .option-button:hover {
            background-color: #003580;
            color: white;
        }
        
        .booking-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #003580;
        }
        
        .booking-card h4 {
            color: #003580;
            margin-bottom: 10px;
        }
        
        .booking-card p {
            margin-bottom: 8px;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 10px;
            }
            
            .message-bubble {
                max-width: 85%;
            }
            
            .chat-messages {
                height: 350px;
            }
            
            .options {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="logo">
                    <svg width="30" height="30" viewBox="0 0 24 24" fill="white">
                        <path d="M22 14v-2h-5.586l2.293-2.293-1.414-1.414L13.586 12l3.707 3.707 1.414-1.414L16.414 12H22z"/>
                        <path d="M8 12l3.707-3.707-1.414-1.414L5.586 12l4.707 4.707 1.414-1.414L8.414 12H2v-2h6.414L6.121 7.707l1.414-1.414L8 12z"/>
                    </svg>
                    <h1>Booking.com</h1>
                </div>
                <div class="status">
                    <div class="status-dot"></div>
                    <span>Online</span>
                </div>
            </div>
        </header>
        
        <div class="chat-container">
            <div class="chat-header">
                <div class="agent-info">
                    <div class="agent-avatar">BC</div>
                    <div>
                        <div class="agent-name">Maria Rodriguez</div>
                        <div class="agent-title">Customer Support Specialist</div>
                    </div>
                </div>
                <div class="chat-time">Today</div>
            </div>
            
            <div class="chat-messages" id="chatMessages">
                <!-- Messages will be added here by JavaScript -->
            </div>
            
            <div class="typing-indicator" id="typingIndicator">
                Maria is typing
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>
            
            <div class="input-area">
                <input type="text" class="message-input" id="messageInput" placeholder="Type your message...">
                <button class="send-button" id="sendButton">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="white">
                        <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const chatMessages = document.getElementById('chatMessages');
            const messageInput = document.getElementById('messageInput');
            const sendButton = document.getElementById('sendButton');
            const typingIndicator = document.getElementById('typingIndicator');
            
            let bookingReferenceProvided = false;
            const correctBookingRef = "DL7X9P2K";
            
            // Initial conversation
            const initialMessages = [
                {
                    sender: 'customer',
                    text: 'Hi, I have a booking from Madrid to Buffalo on Oct 20, 2025. My final destination is closer to Pittsburgh. Is it possible to change my last leg from Philadelphia to Pittsburgh instead of Buffalo, preferably on the same day?',
                    time: '10:05 AM'
                }
            ];
            
            // Function to add a message to the chat
            function addMessage(sender, text, time) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${sender}-message`;
                
                const bubbleDiv = document.createElement('div');
                bubbleDiv.className = 'message-bubble';
                bubbleDiv.textContent = text;
                
                const timeDiv = document.createElement('div');
                timeDiv.className = 'message-time';
                timeDiv.textContent = time;
                
                messageDiv.appendChild(bubbleDiv);
                messageDiv.appendChild(timeDiv);
                
                chatMessages.appendChild(messageDiv);
                
                // Scroll to the bottom
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            // Function to show booking details
            function showBookingDetails() {
                const detailsDiv = document.createElement('div');
                detailsDiv.className = 'booking-details';
                
                detailsDiv.innerHTML = `
                    <h3>Booking Details</h3>
                    <div class="booking-info">
                        <span class="booking-label">Booking Reference:</span>
                        <span class="booking-value">DL7X9P2K</span>
                    </div>
                    <div class="booking-info">
                        <span class="booking-label">Original Route:</span>
                        <span class="booking-value">MAD → PHL → BUF</span>
                    </div>
                    <div class="booking-info">
                        <span class="booking-label">Requested Route:</span>
                        <span class="booking-value">MAD → PHL → PIT</span>
                    </div>
                    <div class="booking-info">
                        <span class="booking-label">Date:</span>
                        <span class="booking-value">October 20, 2025</span>
                    </div>
                `;
                
                chatMessages.appendChild(detailsDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            // Function to show alternative booking options
            function showAlternativeOptions() {
                const cardDiv = document.createElement('div');
                cardDiv.className = 'booking-card';
                
                cardDiv.innerHTML = `
                    <h4>Alternative Flight Option</h4>
                    <p><strong>Route:</strong> Madrid → Philadelphia → Pittsburgh</p>
                    <p><strong>Departure:</strong> October 20, 2025, 8:30 AM</p>
                    <p><strong>Arrival:</strong> October 20, 2025, 5:45 PM</p>
                    <p><strong>Price Difference:</strong> +$45 (includes change fee)</p>
                `;
                
                chatMessages.appendChild(cardDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            // Function to show options
            function showOptions() {
                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'options';
                
                optionsDiv.innerHTML = `
                    <button class="option-button" id="optionYes">Yes, please proceed</button>
                    <button class="option-button" id="optionNo">No, let me check other dates</button>
                `;
                
                chatMessages.appendChild(optionsDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
                
                // Add event listeners to option buttons
                document.getElementById('optionYes').addEventListener('click', function() {
                    addMessage('customer', 'Yes, please proceed with the change.', getCurrentTime());
                    simulateAgentResponse("Great! I've initiated the change. There is a $75 change fee plus a fare difference of $45. Your new total is $120. Would you like to proceed with payment?");
                });
                
                document.getElementById('optionNo').addEventListener('click', function() {
                    addMessage('customer', 'No, let me check other dates first.', getCurrentTime());
                    simulateAgentResponse("No problem. I can hold this option for 24 hours while you check your schedule. Would you like me to send you the available options for other dates?");
                });
            }
            
            // Function to simulate agent response
            function simulateAgentResponse(text) {
                // Show typing indicator
                typingIndicator.style.display = 'flex';
                chatMessages.scrollTop = chatMessages.scrollHeight;
                
                // Wait for a moment before showing the response
                setTimeout(() => {
                    typingIndicator.style.display = 'none';
                    addMessage('agent', text, getCurrentTime());
                    
                    // If this is the first agent response after booking reference, show booking details
                    if (text.includes("I can see your booking")) {
                        showBookingDetails();
                        
                        // Show options after a brief delay
                        setTimeout(() => {
                            simulateAgentResponse("I found available flights from Philadelphia to Pittsburgh on the same day. The flight departs at 4:15 PM and arrives at 5:45 PM. This would get you to your final destination about an hour earlier than your original Buffalo flight.");
                            setTimeout(showAlternativeOptions, 1500);
                            setTimeout(() => {
                                simulateAgentResponse("Would you like me to proceed with changing your flight to Pittsburgh?");
                                setTimeout(showOptions, 1500);
                            }, 3000);
                        }, 1500);
                    }
                }, 2000);
            }
            
            // Function to get current time in HH:MM format
            function getCurrentTime() {
                const now = new Date();
                return now.getHours() + ':' + (now.getMinutes() < 10 ? '0' : '') + now.getMinutes();
            }
            
            // Initialize the chat with initial messages
            initialMessages.forEach(msg => {
                addMessage(msg.sender, msg.text, msg.time);
            });
            
            // Show typing indicator and then the agent asks for booking reference
            setTimeout(() => {
                typingIndicator.style.display = 'flex';
                setTimeout(() => {
                    typingIndicator.style.display = 'none';
                    addMessage('agent', "Hello! Thank you for contacting Booking.com Customer Support. I'd be happy to help you with your flight change request. To access your booking details, could you please provide your booking reference number?", getCurrentTime());
                }, 2000);
            }, 1000);
            
            // Send message when send button is clicked
            sendButton.addEventListener('click', function() {
                const message = messageInput.value.trim();
                if (message) {
                    addMessage('customer', message, getCurrentTime());
                    
                    // Check if this is the booking reference
                    if (!bookingReferenceProvided && message.toUpperCase() === correctBookingRef) {
                        bookingReferenceProvided = true;
                        // Simulate agent response after a delay
                        setTimeout(() => {
                            simulateAgentResponse("Thank you! I've found your booking. I can see your flight from Madrid to Buffalo with a layover in Philadelphia on October 20, 2025. Let me check the availability for changing your final destination to Pittsburgh.");
                        }, 1000);
                    } else if (!bookingReferenceProvided) {
                        // If booking reference is incorrect or not provided yet
                        setTimeout(() => {
                            simulateAgentResponse("I'm sorry, but I couldn't find a booking with that reference. Could you please double-check and provide your correct booking reference number?");
                        }, 1000);
                    } else {
                        // Regular conversation after booking reference is provided
                        setTimeout(() => {
                            simulateAgentResponse("Thank you for your message. I'm checking that information for you now.");
                        }, 1000);
                    }
                    
                    messageInput.value = '';
                }
            });
            
            // Send message when Enter key is pressed
            messageInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendButton.click();
                }
            });
        });
    </script>
</body>
</html>